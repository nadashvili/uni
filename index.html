<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>კვირის განრიგი</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        @font-face {
            font-family: 'MyFont';
            src: url('bpg_nino_mtavruli_bold.ttf') format('truetype');
            font-weight: 700;
            font-style: normal;
        }

        body {
            font-family: 'MyFont', sans-serif;
            background: linear-gradient(135deg, #1f2937 0%, #000000 100%);
            color: #f9fafb;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1.5rem;
        }

        .app-container {
            width: 100%;
            max-width: 400px;
            background-color: rgba(31, 41, 55, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 2rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(107, 114, 128, 0.3);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .header {
            padding: 2rem 1.5rem;
            text-align: center;
        }

        .countdown-card {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 1.5rem;
            text-align: center;
            padding: 1rem;
            margin: 0 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
        }

        .nav-button {
            background-color: rgba(255, 255, 255, 0.15);
            color: white;
            padding: 0.75rem;
            border-radius: 9999px;
            transition: background-color 0.3s, transform 0.3s;
        }

        .nav-button:hover {
            background-color: rgba(255, 255, 255, 0.25);
            transform: scale(1.05);
        }

        .schedule-list {
            padding: 0 1.5rem 1.5rem;
            flex-grow: 1;
            overflow-y: auto;
        }

        .lesson-card {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 1rem;
            padding: 1rem;
            margin-bottom: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s, background-color 0.3s;
        }
        
        .lesson-card:hover {
            transform: translateY(-4px);
            background-color: rgba(255, 255, 255, 0.1);
        }

        .break-card {
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 0.75rem;
            padding: 0.75rem;
            text-align: center;
            margin-bottom: 1rem;
            color: #9ca3af;
            font-size: 0.875rem;
            border: 1px dashed rgba(255, 255, 255, 0.1);
        }

        .dot-indicators {
            display: flex;
            justify-content: center;
            padding: 1rem 0;
        }

        .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.3);
            margin: 0 4px;
            transition: background-color 0.3s, transform 0.3s;
        }

        .dot.active {
            background-color: #818cf8;
            transform: scale(1.4);
        }
    </style>
</head>
<body>

    <div class="app-container">
        
        <div class="header">
            <h1 class="text-3xl font-bold mb-1 text-white">ჩემი განრიგი</h1>
            <p class="text-sm text-gray-400">საუნივერსიტეტო განრიგის აპლიკაცია</p>
        </div>

        <div class="countdown-card">
            <p class="text-xs uppercase tracking-wide text-gray-400 font-semibold mb-2">მომდევნო ლექციამდე</p>
            <p id="countdown-display" class="text-2xl font-bold text-indigo-400">ლოდინი...</p>
        </div>

        <div class="navigation">
            <button id="prev-btn" class="nav-button">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
            </button>
            <h2 id="day-title" class="text-2xl font-bold text-center text-white"></h2>
            <button id="next-btn" class="nav-button">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
            </button>
        </div>

        <div id="schedule-slides" class="schedule-list">
        </div>
        
        <div id="slide-indicators" class="dot-indicators"></div>

    </div>

    <script>
        const schedule = {
            'ორშაბათი': [
                { time: '13:00 - 14:50', title: 'ბიზნესის ადმინისტრირების საფუძვლები 1 (ბიზნესის გარემო)', professor: 'ლეილა ქადაგიშვილი', location: 'X კორპუსი/9 სართული/906' },
            ],
            'სამშაბათი': [
                { time: '10:00 - 10:50', title: 'მიკროეკონომიკის პრინციპები', professor: 'რუსუდან სირბილაძე', location: 'X კორპუსი/2 სართული/205' },
                { time: '11:00 - 12:50', title: 'ინგლისური ენა B1.1', professor: 'მაია უბირია', location: 'X კორპუსი/7 სართული/716' },
                { time: '13:00 - 13:50', title: 'ბიზნესის ადმინისტრირების საფუძვლები 1 (ბიზნესის გარემო)', professor: 'ქრისტინა ჯღანჯღავა', location: 'X კორპუსი/2 სართული/202' },
                { time: '15:00 - 17:50', title: 'ინფორმატიკა ეკონომიკასა და ბიზნესში', professor: 'დემური სიჭინავა', location: 'X კორპუსი/6 სართული/612' },
            ],
            'ხუთშაბათი': [
                { time: '10:00 - 10:50', title: 'მარკეტინგი 1', professor: 'ნანული ოქრუაშვილი', location: 'X კორპუსი/11 სართული/1110' },
                { time: '11:00 - 12:50', title: 'ინგლისური ენა B1.1', professor: 'მაია უბირია', location: 'X კორპუსი/7 სართული/716' },
                { time: '13:00 - 14:50', title: 'მიკროეკონომიკის პრინციპები', professor: 'დალი სეხნიაშვილი', location: 'X კორპუსი/10 სართული/1001' },
                { time: '15:00 - 16:50', title: 'მათემატიკა ეკონომიკისა და ბიზნესისთვის 1', professor: 'არჩილ დოლიძე', location: 'X კორპუსი/9 სართული/913' },
            ],
            'შაბათი': [
                { time: '09:00 - 10:50', title: 'მათემატიკა ეკონომიკისა და ბიზნესისთვის 1', professor: 'ბაკურ გულუა', location: 'X კორპუსი/9 სართული/912' },
                { time: '11:00 - 12:50', title: 'ინგლისური ენა B1.1', professor: 'მაია უბირია', location: 'X კორპუსი/7 სართული/716' },
                { time: '15:00 - 16:50', title: 'მარკეტინგი 1', professor: 'რუსუდან ჯაყელი', location: 'X კორპუსი/11 სართული/1103' },
            ],
        };

        const dayMapping = ['კვირა', 'ორშაბათი', 'სამშაბათი', 'ოთხშაბათი', 'ხუთშაბათი', 'პარასკევი', 'შაბათი'];
        const days = Object.keys(schedule);
        const scheduleSlides = document.getElementById('schedule-slides');
        const dayTitle = document.getElementById('day-title');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const indicatorsContainer = document.getElementById('slide-indicators');
        const countdownDisplay = document.getElementById('countdown-display');
        let currentSlideIndex = 0;

        function formatTimeDifference(start, end) {
            const startParts = start.split(':').map(Number);
            const endParts = end.split(':').map(Number);
            const startDate = new Date();
            startDate.setHours(startParts[0], startParts[1], 0);
            const endDate = new Date();
            endDate.setHours(endParts[0], endParts[1], 0);
            const diffMs = endDate - startDate;
            const diffMins = Math.floor(diffMs / (1000 * 60));
            const hours = Math.floor(diffMins / 60);
            const minutes = diffMins % 60;

            let result = '';
            if (hours > 0) {
                result += `${hours} სთ `;
            }
            result += `${minutes} წთ`;
            return result;
        }

        function renderDay(dayName) {
            const lessons = schedule[dayName];
            scheduleSlides.innerHTML = '';
            dayTitle.textContent = dayName;

            if (lessons && lessons.length > 0) {
                lessons.forEach((lesson, index) => {
                    const card = document.createElement('div');
                    card.className = 'lesson-card';
                    const [startTime, endTime] = lesson.time.split(' - ');
                    card.innerHTML = `
                        <p class="text-sm text-gray-400">${startTime} - ${endTime}</p>
                        <p class="text-xl font-bold text-white mt-1">${lesson.title}</p>
                        <p class="text-xs text-gray-300 mt-2">პედაგოგი: ${lesson.professor}</p>
                        <p class="text-xs text-gray-300">აუდიტორია: ${lesson.location}</p>
                    `;
                    scheduleSlides.appendChild(card);

                    if (index < lessons.length - 1) {
                        const nextLessonTime = lessons[index + 1].time.split(' - ')[0];
                        const breakDuration = formatTimeDifference(endTime, nextLessonTime);
                        const breakCard = document.createElement('div');
                        breakCard.className = 'break-card';
                        breakCard.innerHTML = `შუალედი: ${breakDuration}`;
                        scheduleSlides.appendChild(breakCard);
                    }
                });
            } else {
                scheduleSlides.innerHTML = `<p class="text-center text-gray-400 py-8">ამ დღეს ლექციები არ არის.</p>`;
            }
        }

        days.forEach((day, index) => {
            const indicator = document.createElement('div');
            indicator.classList.add('dot');
            indicator.setAttribute('data-index', index);
            indicatorsContainer.appendChild(indicator);
        });
        const indicators = document.querySelectorAll('#slide-indicators > div');

        function showSlide(index) {
            indicators.forEach((indicator, i) => {
                indicator.classList.remove('active');
            });
            if (indicators[index]) {
                indicators[index].classList.add('active');
            }
            currentSlideIndex = index;
            renderDay(days[index]);
        }

        function navigateSlide(direction) {
            let newIndex = currentSlideIndex + direction;
            if (newIndex < 0) {
                newIndex = days.length - 1;
            } else if (newIndex >= days.length) {
                newIndex = 0;
            }
            showSlide(newIndex);
        }

        prevBtn.addEventListener('click', () => navigateSlide(-1));
        nextBtn.addEventListener('click', () => navigateSlide(1));

        indicators.forEach(indicator => {
            indicator.addEventListener('click', () => {
                const index = parseInt(indicator.getAttribute('data-index'));
                showSlide(index);
            });
        });

        const today = new Date();
        const todayDayName = dayMapping[today.getDay()];
        const todayIndex = days.indexOf(todayDayName);
        if (todayIndex !== -1) {
            showSlide(todayIndex);
        } else {
            showSlide(0);
        }

        const findNextClass = () => {
            const now = new Date();
            let nextClass = null;
            let found = false;
            let currentDayIndex = now.getDay();
            
            for (let i = 0; i < 7; i++) {
                const dayOfWeek = (currentDayIndex + i) % 7;
                const dayName = dayMapping[dayOfWeek];
                const daySchedule = schedule[dayName];

                if (daySchedule) {
                    for (const lesson of daySchedule) {
                        const [startTime] = lesson.time.split(' - ');
                        const [hours, minutes] = startTime.split(':').map(Number);
                        const lessonDate = new Date();
                        lessonDate.setDate(now.getDate() + i);
                        lessonDate.setHours(hours, minutes, 0, 0);

                        if (lessonDate > now) {
                            nextClass = {
                                date: lessonDate,
                                title: lesson.title,
                                day: dayName
                            };
                            found = true;
                            break;
                        }
                    }
                }
                if (found) break;
            }
            return nextClass;
        };

        const updateCountdown = () => {
            const nextClass = findNextClass();
            if (nextClass) {
                const now = new Date();
                const diff = nextClass.date.getTime() - now.getTime();
                const daysLeft = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                
                let countdownText = `${hours}სთ ${minutes}წთ `;
                if (daysLeft > 0) {
                    countdownText = `${daysLeft}დღე ${countdownText}`;
                }
                countdownDisplay.innerHTML = `${countdownText}<br><span class="text-sm font-normal text-gray-400">(${nextClass.day} - ${nextClass.title})</span>`;
            } else {
                countdownDisplay.textContent = 'ამ კვირაში მეტი ლექცია არ არის.';
            }
        };

        setInterval(updateCountdown, 1000);
        updateCountdown();
    </script>
</body>
</html>
